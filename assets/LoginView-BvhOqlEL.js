import{r as n,g as P,c as u,a as t,b as v,f,i as b,n as E,t as p,u as g,j as A,w as x,k as B,o as d,e as D}from"./index-CsiwcZo0.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"mb-3 w-75"},z={key:0,class:"invalid-feedback d-block"},F={class:"mb-3 w-75"},j={key:0,class:"invalid-feedback d-block"},H={key:0,class:"invalid-feedback d-block"},Y=["disabled"],Z={class:"mb-3"},G={class:"mb-3"},J={key:0,class:"invalid-feedback d-block"},K={__name:"UserLogin",emits:["submitted"],setup(C,{emit:V}){const c=n(!1),{login:I,register:R,authError:l}=A(),k=B(),m=n(""),r=n(""),w=n(""),_=n(""),i=n(""),a=n("");function y(){const s=(r.value||"").trim().toLowerCase(),e=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;return s?e.test(s)?(i.value="",!0):(i.value="Formato de email inválido",!1):(i.value="El email es obligatorio",!1)}function L(){const s=m.value||"";return s?s.length<6?(a.value="Mínimo 6 caracteres",!1):!/[A-Za-z]/.test(s)||!/\d/.test(s)?(a.value="Debe incluir letras y números",!1):/\s/.test(s)?(a.value="Sin espacios",!1):(a.value="",!0):(a.value="La contraseña es obligatoria",!1)}function S(){return y()&&L()}const U=P(()=>!i.value&&!a.value&&!!r.value&&!!m.value);async function M(){if(r.value=(r.value||"").trim().toLowerCase(),!!S())try{await R({email:r.value,password:m.value}),k.push("/favorites")}catch(s){console.error("Registration failed:",s)}}async function h(){const s=(w.value||"").trim().toLowerCase(),e=_.value||"";if(!s){l.value="El email es obligatorio";return}if(!e){l.value="La contraseña es obligatoria";return}try{await I({email:s,password:e}),k.push("/favorites")}catch(o){console.error("Login failed:",o)}}function q(){c.value=!1,l.value=null}function N(){c.value=!0,l.value=null}return(s,e)=>c.value?(d(),u("form",{key:1,onSubmit:x(h,["prevent"]),class:"login-form"},[t("div",Z,[e[8]||(e[8]=t("label",{class:"form-label custom-label"}," Email",-1)),f(t("input",{id:"loginEmailInput",type:"email","onUpdate:modelValue":e[2]||(e[2]=o=>w.value=o),class:"form-control",autocomplete:"username",required:""},null,512),[[b,w.value,void 0,{trim:!0}]])]),t("div",G,[e[9]||(e[9]=t("label",{class:"form-label custom-label"},"Contraseña",-1)),f(t("input",{id:"loginPasswordInput",type:"password","onUpdate:modelValue":e[3]||(e[3]=o=>_.value=o),class:"form-control",autocomplete:"current-password",required:""},null,512),[[b,_.value]])]),g(l)?(d(),u("div",J,p(g(l)),1)):v("",!0),t("div",{class:"mb-3"},[t("button",{type:"button",class:"btn custom-btn__link mx-2",onClick:q}," Registrarme "),e[10]||(e[10]=t("button",{type:"submit",class:"btn custom-btn mx-2"},"Iniciar Sesión",-1))])],32)):(d(),u("form",{key:0,onSubmit:x(M,["prevent"])},[t("div",$,[e[4]||(e[4]=t("label",{class:"form-label custom-label"},"Email",-1)),f(t("input",{id:"emailInput",type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),onInput:y,class:E(["form-control",{"is-invalid":i.value}]),required:""},null,34),[[b,r.value,void 0,{trim:!0}]]),i.value?(d(),u("div",z,p(i.value),1)):v("",!0)]),t("div",F,[e[5]||(e[5]=t("label",{class:"form-label custom-label"},"Contraseña",-1)),f(t("input",{id:"pswrdInput",type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),onInput:L,class:E(["form-control",{"is-invalid":a.value}]),minlength:"6",required:""},null,34),[[b,m.value]]),e[6]||(e[6]=t("div",{class:"form-text"},"Mín. 6 caracteres, con letras y números.",-1)),a.value?(d(),u("div",j,p(a.value),1)):v("",!0)]),e[7]||(e[7]=t("div",{id:"emailHelp",class:"form-text pb-4"}," Nunca compartiremos tus datos con terceros. ",-1)),g(l)?(d(),u("div",H,p(g(l)),1)):v("",!0),t("div",null,[t("button",{type:"button",class:"btn custom-btn__link mx-2",onClick:N}," Ya tengo una cuenta "),t("button",{type:"submit",class:"btn custom-btn mx-2",disabled:!U.value}," Registrar ",8,Y)])],32))}},O=T(K,[["__scopeId","data-v-466e77d8"]]),Q={class:"custom-container"},ee={__name:"LoginView",setup(C){return(V,c)=>(d(),u("section",Q,[D(O,{class:"userLogin-container"})]))}};export{ee as default};
