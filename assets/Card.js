import{l as N,g as P,m as H,c as l,b as g,a as t,u as a,F as C,q as A,k as T,s as U,o as d,n as F,t as o,w as p,e as I,x as f,y as D}from"./index.js";import{u as K,a as Q}from"./usePokedex.js";import{_ as R}from"./_plugin-vue_export-helper.js";const G={class:"container py-3"},J={key:0,class:"text-center py-5 custom-text text-black"},O={class:"row g-3"},W=["onClick","onMouseenter","aria-pressed"],X={class:"flip-card-front card custom-card p-4 d-flex flex-column align-items-center justify-content-between"},Y={class:"card-title d-flex justify-content-between align-items-center w-100 gap-2 flex-row"},Z={class:"fw-bold fs-5"},tt=["aria-pressed","onClick","title"],st=["src","alt"],et={class:"card-title text-capitalize text-center mt-2"},at={key:0,class:"card-text text-muted small mb-2"},it={class:"flip-card-back card custom-card p-3 d-flex flex-column justify-content-between align-items-stretch"},nt={key:0,class:"poke-back w-100 p-2 flex-column flex-grow-1 d-flex text-center"},ot={class:"d-flex justify-content-between align-items-center gap-2 mb-4 w-100"},lt={class:"fw-bold"},dt={class:"fw-bold"},ct={class:"justify-content-between gap-3 mb-2"},rt={class:"d-flex justify-content-center flex-wrap mb-3"},ut={class:"stats mb-auto"},ft={class:"stat"},gt={class:"bar"},mt={class:"value"},_t={class:"stat"},ht={class:"bar"},pt={class:"value"},yt={class:"stat"},vt={class:"bar"},bt={class:"value"},xt={class:"stat"},kt={class:"bar"},wt={class:"value"},Ct={key:0,class:"text-center mt-3"},At=["onClick"],Ft={key:1,class:"text-center py-5"},Dt={__name:"Card",props:{search:{type:String,default:""},onlyFavorites:{type:Boolean,default:!1}},emits:["no-results","has-results"],setup(B,{emit:E}){const{isFav:u,toggleFavLocal:y}=K(),M=T();function j(n){M.push({name:"PokemonDetails",params:{id:n.id}})}const m=B,v=E,{list:_,loading:b,details:i,loadList:z,ensureDetails:x,show:S,hide:L,isExpanded:h}=Q();N(async()=>{(!_.value||_.value.length===0)&&await z(151,0)});const k=P(()=>{const n=(m.search??"").toLowerCase().trim();let e=_.value;return n&&(e=e.filter(c=>c.name.toLowerCase().includes(n))),m.onlyFavorites&&(e=e.filter(c=>u(c.id))),e});H([k,()=>m.search,b],([n,e,c])=>{c||!(e??"").trim()||(Array.isArray(n)&&n.length===0?v("no-results"):v("has-results"))},{immediate:!0});function w(n){return String(n).padStart(3,"0")}async function V(n){const e=n.id;h(e)?L(e):(await x(e),S(e))}async function $(n){i.get(n)||x(n)}const q={fire:"#EE8130",water:"#6390F0",grass:"#7AC74C",electric:"#F7D02C",ice:"#96D9D6",fighting:"#C22E28",poison:"#A33EA1",ground:"#E2BF65",flying:"#A98FF3",psychic:"#F95587",bug:"#A6B91A",rock:"#B6A136",ghost:"#735797",dragon:"#6F35FC",dark:"#705746",steel:"#B7B7CE",fairy:"#D685AD",normal:"#A8A77A"};return(n,e)=>{const c=U("font-awesome-icon");return d(),l("div",G,[a(b)?(d(),l("div",J," Cargando pokémon… ")):g("",!0),t("div",O,[(d(!0),l(C,null,A(k.value,s=>(d(),l("div",{class:"col-12 col-sm-6 col-md-4 col-lg-3",key:s.id},[t("div",{class:"flip-card",role:"button",onClick:r=>V(s),onMouseenter:r=>$(s.id),"aria-pressed":a(h)(s.id)?"true":"false"},[t("div",{class:F(["flip-card-inner",{"is-flipped":a(h)(s.id)}])},[t("div",X,[t("header",Y,[t("div",Z,"#"+o(w(s.id)),1),t("button",{class:"btn fav-btn","aria-pressed":a(u)(s.id)?"true":"false",onClick:p(r=>a(y)(s.id),["stop"]),title:a(u)(s.id)?"Quitar de favoritos":"Agregar a favoritos"},[I(c,{icon:[a(u)(s.id)?"fas":"far","heart"],class:F(a(u)(s.id)?"text-danger":"text-dark"),onClick:p(r=>a(y)(s.id),["stop"])},null,8,["icon","class","onClick"])],8,tt)]),t("img",{src:s.imageUrl,loading:"lazy",class:"card-img-top img-fluid my-2",alt:s.name,style:{"max-height":"180px","object-fit":"contain"}},null,8,st),t("h5",et,o(s.name),1),a(i).get(s.id)?(d(),l("p",at,o((a(i).get(s.id).flavor||"").replace(/\n|\f/g," ")),1)):g("",!0),a(i).get(s.id)?(d(),l("span",{key:1,style:f({backgroundColor:q[a(i).get(s.id).types[0]]||"#777"}),class:"badge type-badge text-capitalize mt-2"},o(a(i).get(s.id).types[0]),5)):g("",!0)]),t("div",it,[a(i).get(s.id)?(d(),l("div",nt,[t("header",ot,[t("span",lt,"#"+o(w(s.id)),1),t("span",dt,o(s.name.toUpperCase()),1)]),t("div",ct,[t("div",null,[e[0]||(e[0]=t("strong",null,"Altura:",-1)),D(" "+o(a(i).get(s.id).heightM)+"m ",1)]),t("div",null,[e[1]||(e[1]=t("strong",null,"Peso:",-1)),D(" "+o(a(i).get(s.id).weightKg)+"kg ",1)])]),e[6]||(e[6]=t("h6",{class:"mt-3"},[t("strong",null,"Habilidades")],-1)),t("div",rt,[(d(!0),l(C,null,A(a(i).get(s.id).abilities,r=>(d(),l("span",{key:r,class:"ability text-capitalize m-1"},o(r),1))),128))]),e[7]||(e[7]=t("h6",{class:"mt-1"},[t("strong",null,"Estadísticas")],-1)),t("div",ut,[t("div",ft,[e[2]||(e[2]=t("span",{class:"label"},"HP:",-1)),t("span",gt,[t("span",{class:"fill",style:f({width:Math.min(a(i).get(s.id).stats.hp,100)+"%"})},null,4)]),t("span",mt,o(a(i).get(s.id).stats.hp),1)]),t("div",_t,[e[3]||(e[3]=t("span",{class:"label"},"Attack:",-1)),t("span",ht,[t("span",{class:"fill",style:f({width:Math.min(a(i).get(s.id).stats.attack,100)+"%"})},null,4)]),t("span",pt,o(a(i).get(s.id).stats.attack),1)]),t("div",yt,[e[4]||(e[4]=t("span",{class:"label"},"Defense:",-1)),t("span",vt,[t("span",{class:"fill",style:f({width:Math.min(a(i).get(s.id).stats.defense,100)+"%"})},null,4)]),t("span",bt,o(a(i).get(s.id).stats.defense),1)]),t("div",xt,[e[5]||(e[5]=t("span",{class:"label"},"Speed:",-1)),t("span",kt,[t("span",{class:"fill",style:f({width:Math.min(a(i).get(s.id).stats.speed,100)+"%"})},null,4)]),t("span",wt,o(a(i).get(s.id).stats.speed),1)])]),a(i).get(s.id)?(d(),l("div",Ct,[t("button",{class:"btn custom-btn__card w-100",onClick:p(r=>j(s),["stop"])}," Ver detalles ",8,At)])):g("",!0)])):(d(),l("div",Ft,"Cargando detalles…"))])],2)],40,W)]))),128))])])}}},jt=R(Dt,[["__scopeId","data-v-8c10e201"]]);export{jt as C};
